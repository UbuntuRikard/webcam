<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Webcam Streamer</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="manifest" href="/webcam/manifest.json"> 
</head>
<body>
	<div class="controls-left">
		<button id="zoom5Btn" class="zoom-btn">x5</button>
		<button id="zoom4Btn" class="zoom-btn">x4</button>
		<button id="zoom3Btn" class="zoom-btn">x3</button>
		<button id="zoom2Btn" class="zoom-btn">x2</button>
		<button id="zoom1Btn" class="zoom-btn">x1</button>
	</div>

	<video id="video" autoplay playsinline style="display:none;"></video>
	<canvas id="canvas" style="display:block;"></canvas>

	<style>
		/* Generel stil for dine almindelige kontrolknapper (som din Gem Konfiguration) */
		.control-btn {
			padding: 8px 12px;
			border: 1px solid #ccc;
			border-radius: 4px;
			background-color: #f0f0f0;
			cursor: pointer;
			font-size: 14px;
			text-align: center;
			/* Beholder auto-bredde for denne type knap, da den kan have tekst/ikon */
			width: auto;
			white-space: nowrap; /* Undgå linjeskift i knaptekst */
		}

		.control-btn:hover {
			background-color: #e0e0e0;
		}

		/* Styling for at placere zoom-knapper i venstre side */
		.controls-left {
			position: absolute;
			top: 60px; /* Juster efter behov for at undgå at dække top-overlay */
			left: 10px;
			display: flex;
			flex-direction: column; /* Stabler knapper vertikalt */
			gap: 5px; /* Plads mellem knapper */
			z-index: 10; /* Sørg for at knapperne er over canvas/video */
		}

		/* Specifik stil for zoom-knapperne */
		.zoom-btn {
			padding: 8px 5px; /* Mindre padding for at gøre dem smallere */
			border: 1px solid #ccc;
			border-radius: 4px;
			background-color: #f0f0f0;
			cursor: pointer;
			font-size: 14px;
			text-align: center;
			/* Gør dem smallere - ca. bredden af to tegn */
			width: 35px; /* Juster dette tal for at få den præcise bredde du ønsker */
			min-width: 35px; /* Sørg for at den ikke bliver mindre */
			max-width: 35px; /* Sørg for at den ikke bliver større */
			box-sizing: border-box; /* Sørg for at padding og border er inkluderet i bredden */
		}

		.zoom-btn:hover {
			background-color: #e0e0e0;
		}
	</style>
  <div id="overlay">
    <div id="ipaddress" class="overlay-info"></div>
    <div id="appVersion" class="overlay-info"></div>
    <div id="battery" class="overlay-info"></div>
  </div>

  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>
  <div id="status"></div>

  <div id="controls">
    <div id="connection-config">
      <input type="text" id="serverIp" placeholder="192.168.1.42" class="compact-input" />
      <input type="text" id="serverPort" placeholder="8181" value="8181" class="compact-input" />
      <button id="saveConfigBtn" class="icon-button"><i class="fas fa-save"></i></button>
    </div>

    <div id="controls-container">
      <select id="cameraSelect" class="compact-select"></select>
      <select id="resolutionSelect" class="compact-select">
        <option value="vga">640x480</option>
        <option value="hd">1280x720</option>
        <option value="fhd">1920x1080</option>
      </select>
      <select id="fpsSelect" class="compact-select">
        <option value="5">5 FPS</option>
        <option value="10" selected>10 FPS</option>
        <option value="20">20 FPS</option>
      </select>
      <button id="startBtn" class="icon-text-button"><i class="fas fa-play"></i> Start</button>
      <button id="stopBtn" class="icon-text-button"><i class="fas fa-stop"></i> Stop</button>
    </div>
  </div>

  <script src="webcam.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        // Register the service worker, ensuring the path is correct for GitHub Pages
        navigator.serviceWorker.register('/webcam/sw.js') 
          .then(registration => {
            console.log('Service Worker registered! Scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
